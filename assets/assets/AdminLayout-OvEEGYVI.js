import{c as a,o as r,a as e,u as P,r as f,b as X,w as G,n as Q,d as F,e as q,f as E,g as m,h as N,i as Y,v as ee,j as K,k as B,F as $,l as z,m as L,p as U,t as x,T as te,q as A,s as se,x as oe,y as ne,z as R,A as I,B as re,C as W,D as le,E as Z}from"./main-CKplmvXD.js";function ae(w,_){return r(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m21 7.5-9-5.25L3 7.5m18 0-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"})])}function ie(w,_){return r(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 10.5V6a3.75 3.75 0 1 0-7.5 0v4.5m11.356-1.993 1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 0 1-1.12-1.243l1.264-12A1.125 1.125 0 0 1 5.513 7.5h12.974c.576 0 1.059.435 1.119 1.007ZM8.625 10.5a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm7.5 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"})])}function de(w,_){return r(),a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"})])}const ue={key:0,class:"fixed inset-0 z-[10000] overflow-y-auto"},ce={class:"border-b border-gray-200 p-4"},pe={class:"relative"},ve=["onKeydown"],ge={class:"max-h-96 overflow-y-auto"},ye={key:0,class:"p-8 text-center text-gray-500"},fe={key:1,class:"p-8 text-center text-gray-500"},xe={key:2,class:"p-8 text-center text-gray-500"},he={key:3,class:"divide-y divide-gray-200"},me=["onClick"],be={class:"flex items-center gap-3"},ke={class:"flex-1 min-w-0"},we={class:"text-sm font-medium text-gray-900"},_e={class:"text-xs text-gray-500 truncate"},Ce={class:"text-xs text-gray-400"},$e={class:"px-4 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wider bg-gray-50"},Le=["onClick"],Me={class:"flex items-center gap-3"},je={class:"flex-1 min-w-0"},Be=["innerHTML"],ze=["innerHTML"],Se={class:"text-xs text-gray-400"},Ie={class:"border-t border-gray-200 bg-gray-50 px-4 py-3 flex items-center justify-between text-xs text-gray-500"},Ne={key:0},Ee={__name:"SearchModal",props:{isOpen:{type:Boolean,default:!1}},emits:["close"],setup(w,{emit:_}){const S=w,D=_,b=P(),v=f(null),u=f(""),C=f(!1),g=f([]),i=f(-1),p=f([]),y=X(()=>{const o={};return g.value.forEach(s=>{o[s.type]||(o[s.type]={type:s.type,label:s.type_label,items:[]}),o[s.type].items.push(s)}),Object.values(o)}),M=(o,s)=>{let l=0;for(let h=0;h<o;h++)l+=y.value[h].items.length;return l+s},j=o=>{const s={user:{icon:de,bg:"bg-blue-100 text-blue-600"},order:{icon:ie,bg:"bg-green-100 text-green-600"},product:{icon:ae,bg:"bg-purple-100 text-purple-600"},setting:{icon:oe,bg:"bg-gray-100 text-gray-600"},default:{icon:se,bg:"bg-gray-100 text-gray-600"}};return s[o]||s.default},V=(o,s)=>{if(!s||!o)return o;const l=new RegExp(`(${s})`,"gi");return o.replace(l,'<mark class="bg-yellow-200">$1</mark>')},O=async()=>{var o,s;if(!u.value||u.value.length<2){g.value=[],i.value=-1;return}C.value=!0,i.value=-1;try{const l=await A.get(((o=window.buygo_admin)==null?void 0:o.rest_url)+"buygo/v1/search",{headers:{"X-WP-Nonce":(s=window.buygo_admin)==null?void 0:s.nonce},params:{q:u.value}});l.data.success&&(g.value=l.data.data||[])}catch(l){console.error("搜尋失敗:",l),g.value=[]}finally{C.value=!1}},T=()=>{if(u.value&&y.value.length>0){const o=y.value.reduce((s,l)=>s+l.items.length,0);if(o===0)return;i.value=(i.value+1)%o}else p.value.length>0&&(i.value=(i.value+1)%p.value.length)},H=()=>{if(u.value&&y.value.length>0){const o=y.value.reduce((s,l)=>s+l.items.length,0);if(o===0)return;i.value=i.value<=0?o-1:i.value-1}else if(p.value.length>0){const o=p.value.length;i.value=i.value<=0?o-1:i.value-1}},d=()=>{if(u.value&&y.value.length>0){let o=0;for(const s of y.value)for(const l of s.items){if(o===i.value){t(l);return}o++}}else i.value>=0&&p.value[i.value]&&t(p.value[i.value])},t=o=>{const s=p.value.filter(l=>l.id!==o.id);if(s.unshift(o),p.value=s.slice(0,5),localStorage.setItem("buygo_recent_searches",JSON.stringify(p.value)),o.link){const l=o.link.replace(/^#/,"");b.push(l),c()}},c=()=>{D("close"),u.value="",g.value=[],i.value=-1},n=o=>{if(o.key==="Escape"&&S.isOpen){o.preventDefault(),c();return}(o.metaKey||o.ctrlKey)&&o.key==="k"&&o.preventDefault()};return G(()=>S.isOpen,o=>{o?Q(()=>{var l;(l=v.value)==null||l.focus();const s=localStorage.getItem("buygo_recent_searches");if(s)try{p.value=JSON.parse(s)}catch{p.value=[]}document.addEventListener("keydown",n)}):document.removeEventListener("keydown",n)}),F(()=>{S.isOpen&&document.addEventListener("keydown",n)}),q(()=>{document.removeEventListener("keydown",n)}),(o,s)=>(r(),E(te,{to:"body"},[w.isOpen?(r(),a("div",ue,[e("div",{class:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:c}),e("div",{class:"flex min-h-full items-center justify-center p-4 relative z-10",onClick:c},[e("div",{class:"relative w-full max-w-2xl transform overflow-hidden rounded-lg bg-white shadow-xl transition-all",onClick:s[1]||(s[1]=N(()=>{},["stop"]))},[e("div",ce,[e("div",pe,[s[2]||(s[2]=e("div",{class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),Y(e("input",{ref_key:"searchInputRef",ref:v,"onUpdate:modelValue":s[0]||(s[0]=l=>u.value=l),onInput:O,onKeydown:[K(c,["esc"]),K(N(T,["prevent"]),["down"]),K(N(H,["prevent"]),["up"]),K(N(d,["prevent"]),["enter"])],type:"text",class:"block w-full rounded-md border-0 py-3 pl-12 pr-20 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-gray-900 sm:text-sm sm:leading-6",placeholder:"搜尋訂單、產品、會員、設定...",autocomplete:"off"},null,40,ve),[[ee,u.value]]),s[3]||(s[3]=e("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3"},[e("kbd",{class:"hidden sm:inline-flex items-center rounded border border-gray-200 bg-white px-2 py-1 text-xs font-semibold text-gray-500"},"⌘K")],-1))])]),e("div",ge,[C.value?(r(),a("div",ye,[...s[4]||(s[4]=[e("svg",{class:"animate-spin h-5 w-5 mx-auto mb-2",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),B(" 搜尋中... ",-1)])])):u.value&&g.value.length===0?(r(),a("div",fe,[...s[5]||(s[5]=[e("p",{class:"text-sm"},"找不到相關結果",-1)])])):!u.value&&p.value.length===0?(r(),a("div",xe,[...s[6]||(s[6]=[e("p",{class:"text-sm"},"開始輸入以搜尋...",-1)])])):(r(),a("div",he,[!u.value&&p.value.length>0?(r(),a($,{key:0},[s[7]||(s[7]=e("div",{class:"px-4 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wider bg-gray-50"}," 最近搜尋 ",-1)),(r(!0),a($,null,z(p.value,(l,h)=>(r(),a("button",{key:l.id,onClick:k=>t(l),class:L(["w-full px-4 py-3 text-left hover:bg-gray-50 transition-colors",i.value===h?"bg-gray-50":""])},[e("div",be,[e("div",{class:L([j(l.type).bg,"rounded-full p-2"])},[(r(),E(U(j(l.type).icon),{class:"h-4 w-4"}))],2),e("div",ke,[e("p",we,x(l.title),1),e("p",_e,x(l.subtitle),1)]),e("span",Ce,x(l.type_label),1)])],10,me))),128))],64)):(r(!0),a($,{key:1},z(y.value,(l,h)=>(r(),a("div",{key:l.type},[e("div",$e,x(l.label),1),(r(!0),a($,null,z(l.items,(k,J)=>(r(),a("button",{key:k.id,onClick:ft=>t(k),class:L(["w-full px-4 py-3 text-left hover:bg-gray-50 transition-colors",i.value===M(h,J)?"bg-blue-50 border-l-2 border-blue-600":""])},[e("div",Me,[e("div",{class:L([j(k.type).bg,"rounded-full p-2"])},[(r(),E(U(j(k.type).icon),{class:"h-4 w-4"}))],2),e("div",je,[e("p",{class:"text-sm font-medium text-gray-900",innerHTML:V(k.title,u.value)},null,8,Be),e("p",{class:"text-xs text-gray-500 truncate",innerHTML:V(k.subtitle,u.value)},null,8,ze)]),e("span",Se,x(k.type_label),1)])],10,Le))),128))]))),128))]))]),e("div",Ie,[s[8]||(s[8]=e("div",{class:"flex items-center gap-4"},[e("span",{class:"flex items-center gap-1"},[e("kbd",{class:"px-1.5 py-0.5 rounded border border-gray-300"},"↑"),e("kbd",{class:"px-1.5 py-0.5 rounded border border-gray-300"},"↓"),B(" 導航 ")]),e("span",{class:"flex items-center gap-1"},[e("kbd",{class:"px-1.5 py-0.5 rounded border border-gray-300"},"Enter"),B(" 選擇 ")]),e("span",{class:"flex items-center gap-1"},[e("kbd",{class:"px-1.5 py-0.5 rounded border border-gray-300"},"Esc"),B(" 關閉 ")])],-1)),g.value.length>0?(r(),a("span",Ne,x(g.value.length)+" 個結果",1)):m("",!0)])])])])):m("",!0)]))}},De={class:"min-h-screen text-gray-900 flex flex-col",style:{"background-color":"#f0f2f5","font-family":"'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"}},Ve={class:"bg-white border-b border-gray-200 sticky top-[32px] z-[9999] h-16 flex items-center justify-between px-4 sm:px-6 lg:px-8 shadow-sm"},Te={class:"flex items-center gap-4"},He={key:0,class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Ke={key:1,class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Re={class:"hidden md:flex flex-1 justify-center px-2"},Ae={class:"flex space-x-1 overflow-x-auto no-scrollbar max-w-full"},Oe=["href","onClick"],Ue={class:"flex items-center gap-3 justify-end"},We={key:0,class:"absolute top-0 right-0 flex h-5 w-5 items-center justify-center rounded-full bg-red-500 text-xs font-bold text-white"},Ze={key:0,class:"absolute right-0 mt-2 w-80 rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-50"},Pe={class:"p-4 border-b border-gray-200 flex items-center justify-between"},Xe={class:"max-h-96 overflow-y-auto"},Fe={key:0,class:"p-8 text-center text-gray-500"},qe={key:1,class:"p-8 text-center text-gray-500"},Je={key:2,class:"divide-y divide-gray-200"},Ge=["onClick","href"],Qe={class:"flex items-start gap-3"},Ye={class:"flex-shrink-0 mt-0.5"},et={key:0,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},tt={key:1,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},st={key:2,class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},ot={class:"flex-1 min-w-0"},nt={class:"text-sm font-medium text-gray-900"},rt={class:"text-sm text-gray-500 truncate"},lt={class:"text-xs text-gray-400 mt-1"},at={key:0,class:"flex-shrink-0"},it={key:0,class:"p-3 border-t border-gray-200"},dt={class:"flex-1 w-full max-w-[1920px] mx-auto flex items-start"},ut={key:0,class:"hidden lg:block w-48 flex-shrink-0 sticky top-[96px] h-[calc(100vh-96px)] overflow-y-auto border-r border-gray-200 bg-white"},ct={class:"group py-4 px-2 space-y-1"},pt={class:"flex-1 w-full min-w-0 min-h-[calc(100vh-96px)] pb-24 lg:pb-0",style:{"background-color":"#f0f2f5"}},vt={class:"py-8 px-6 sm:px-8 lg:px-12 max-w-7xl mx-auto"},gt={class:"h-full overflow-y-auto"},yt={class:"px-4 py-6 space-y-1"},ht={__name:"AdminLayout",props:["hasSidebar"],setup(w){const _=le(),S=P(),D=X(()=>ne.filter(d=>d.meta&&d.meta.showInMenu)),b=f(!1),v=f(!1),u=f(!1),C=f(null),g=f(!1),i=f({notifications:[],unread_count:0}),p=()=>{u.value=!u.value,u.value&&i.value.notifications.length===0&&M()},y=()=>{u.value=!1},M=async()=>{var d,t,c;g.value=!0;try{const n=((d=window.buygo_admin)==null?void 0:d.rest_url)||((t=window.buygo_admin)==null?void 0:t.api_url)||"/wp-json/buygo/v1",o=n.endsWith("/")?n+"notifications/summary":n+"/notifications/summary",s=await A.get(o,{headers:{"X-WP-Nonce":(c=window.buygo_admin)==null?void 0:c.nonce}});s.data.success&&(i.value=s.data.data)}catch(n){console.error("載入通知失敗:",n)}finally{g.value=!1}},j=async d=>{if(d.unread&&await V(d.id,d.type),y(),d.link){const t=d.link.replace(/^#/,"");S.push(t)}},V=async(d,t)=>{var c,n,o;try{const s=((c=window.buygo_admin)==null?void 0:c.rest_url)||((n=window.buygo_admin)==null?void 0:n.api_url)||"/wp-json/buygo/v1",l=s.endsWith("/")?s+"notifications/mark-read":s+"/notifications/mark-read";await A.post(l,{notification_id:d,notification_type:t},{headers:{"X-WP-Nonce":(o=window.buygo_admin)==null?void 0:o.nonce,"Content-Type":"application/json"}}),M()}catch(s){console.error("標記已讀失敗:",s)}},O=async()=>{var d,t,c;try{const n=((d=window.buygo_admin)==null?void 0:d.rest_url)||((t=window.buygo_admin)==null?void 0:t.api_url)||"/wp-json/buygo/v1",o=n.endsWith("/")?n+"notifications/mark-all-read":n+"/notifications/mark-all-read";await A.post(o,{},{headers:{"X-WP-Nonce":(c=window.buygo_admin)==null?void 0:c.nonce,"Content-Type":"application/json"}}),M()}catch(n){console.error("標記全部已讀失敗:",n)}},T=d=>{if(C.value&&!C.value.contains(d.target)&&y(),v.value){const t=document.querySelector(".fixed.inset-y-0.left-0.z-\\[10001\\]");t&&!t.contains(d.target)&&(v.value=!1)}},H=d=>{(d.metaKey||d.ctrlKey)&&d.key==="k"&&(d.preventDefault(),b.value=!b.value)};return F(()=>{document.addEventListener("click",T),document.addEventListener("keydown",H),M()}),q(()=>{document.removeEventListener("click",T),document.removeEventListener("keydown",H)}),(d,t)=>{const c=re("router-link");return r(),a("div",De,[e("header",Ve,[e("div",Te,[R(c,{to:"/",class:"flex items-center gap-2"},{default:I(()=>[...t[7]||(t[7]=[e("div",{class:"bg-blue-600 text-white rounded p-1"},[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})])],-1),e("h1",{class:"text-xl font-bold text-gray-800 tracking-tight"},"BuyGo",-1)])]),_:1}),e("button",{onClick:t[0]||(t[0]=n=>v.value=!v.value),class:"md:hidden p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-900"},[v.value?(r(),a("svg",Ke,[...t[9]||(t[9]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,-1)])])):(r(),a("svg",He,[...t[8]||(t[8]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},null,-1)])]))])]),e("div",Re,[e("nav",Ae,[(r(!0),a($,null,z(D.value,n=>(r(),E(c,{key:n.name,to:n.path,custom:""},{default:I(({href:o,navigate:s,isActive:l})=>[e("a",{href:o,onClick:s,class:L([l||W(_).matched.some(h=>h.path===n.path)?"text-blue-600 bg-blue-50":"text-gray-600 hover:text-gray-900 hover:bg-gray-100","px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200 ease-in-out whitespace-nowrap focus:outline-none focus:ring-0"])},x(n.meta.title),11,Oe)]),_:2},1032,["to"]))),128))])]),e("div",Ue,[e("button",{onClick:t[1]||(t[1]=n=>b.value=!0),class:"hidden lg:flex items-center gap-3 bg-gray-100 hover:bg-gray-200 text-gray-500 px-3 py-1.5 rounded-md transition-colors text-sm border border-transparent"},[...t[10]||(t[10]=[e("span",{class:"text-sm font-medium"},"搜尋",-1),e("span",{class:"text-xs text-gray-400 font-sans border border-gray-300 rounded px-1.5 bg-white"},"⌘K",-1)])]),R(c,{to:"/settings",class:"p-2 rounded-full text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-900 transition-colors",title:"設定"},{default:I(()=>[...t[11]||(t[11]=[e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 22 22",stroke:"currentColor","stroke-width":"1.5"},[e("path",{d:"M20.3175 6.14139L19.8239 5.28479C19.4506 4.63696 19.264 4.31305 18.9464 4.18388C18.6288 4.05472 18.2696 4.15664 17.5513 4.36048L16.3311 4.70418C15.8725 4.80994 15.3913 4.74994 14.9726 4.53479L14.6357 4.34042C14.2766 4.11043 14.0004 3.77133 13.8475 3.37274L13.5136 2.37536C13.294 1.71534 13.1842 1.38533 12.9228 1.19657C12.6615 1.00781 12.3143 1.00781 11.6199 1.00781H10.5051C9.81078 1.00781 9.4636 1.00781 9.20223 1.19657C8.94085 1.38533 8.83106 1.71534 8.61149 2.37536L8.27753 3.37274C8.12465 3.77133 7.84845 4.11043 7.48937 4.34042L7.15249 4.53479C6.73374 4.74994 6.25259 4.80994 5.79398 4.70418L4.57375 4.36048C3.85541 4.15664 3.49625 4.05472 3.17867 4.18388C2.86109 4.31305 2.67445 4.63696 2.30115 5.28479L1.80757 6.14139C1.45766 6.74864 1.2827 7.05227 1.31666 7.37549C1.35061 7.69871 1.58483 7.95918 2.05326 8.48012L3.0843 9.63282C3.3363 9.95185 3.51521 10.5078 3.51521 11.0077C3.51521 11.5078 3.33636 12.0636 3.08433 12.3827L2.05326 13.5354C1.58483 14.0564 1.35062 14.3168 1.31666 14.6401C1.2827 14.9633 1.45766 15.2669 1.80757 15.8741L2.30114 16.7307C2.67443 17.3785 2.86109 17.7025 3.17867 17.8316C3.49625 17.9608 3.85542 17.8589 4.57377 17.655L5.79394 17.3113C6.25263 17.2055 6.73387 17.2656 7.15267 17.4808L7.4895 17.6752C7.84851 17.9052 8.12464 18.2442 8.2775 18.6428L8.61149 19.6403C8.83106 20.3003 8.94085 20.6303 9.20223 20.8191C9.4636 21.0078 9.81078 21.0078 10.5051 21.0078H11.6199C12.3143 21.0078 12.6615 21.0078 12.9228 20.8191C13.1842 20.6303 13.294 20.3003 13.5136 19.6403L13.8476 18.6428C14.0004 18.2442 14.2765 17.9052 14.6356 17.6752L14.9724 17.4808C15.3912 17.2656 15.8724 17.2055 16.3311 17.3113L17.5513 17.655C18.2696 17.8589 18.6288 17.9608 18.9464 17.8316C19.264 17.7025 19.4506 17.3785 19.8239 16.7307L20.3175 15.8741C20.6674 15.2669 20.8423 14.9633 20.8084 14.6401C20.7744 14.3168 20.5402 14.0564 20.0718 13.5354L19.0407 12.3827C18.7887 12.0636 18.6098 11.5078 18.6098 11.0077C18.6098 10.5078 18.7888 9.95185 19.0407 9.63282L20.0718 8.48012C20.5402 7.95918 20.7744 7.69871 20.8084 7.37549C20.8423 7.05227 20.6674 6.74864 20.3175 6.14139Z","stroke-linecap":"round"}),e("path",{d:"M14.5195 11C14.5195 12.933 12.9525 14.5 11.0195 14.5C9.08653 14.5 7.51953 12.933 7.51953 11C7.51953 9.067 9.08653 7.5 11.0195 7.5C12.9525 7.5 14.5195 9.067 14.5195 11Z","stroke-linecap":"round"})],-1)])]),_:1}),e("div",{class:"relative",ref_key:"notificationRef",ref:C},[e("button",{onClick:p,class:"relative p-2 rounded-full text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-900"},[t[12]||(t[12]=e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})],-1)),i.value.unread_count>0?(r(),a("span",We,x(i.value.unread_count>9?"9+":i.value.unread_count),1)):m("",!0)]),u.value?(r(),a("div",Ze,[e("div",Pe,[t[13]||(t[13]=e("h3",{class:"text-sm font-semibold text-gray-900"},"未讀通知",-1)),i.value.notifications.length>0&&i.value.unread_count>0?(r(),a("button",{key:0,onClick:O,class:"text-xs text-gray-600 hover:text-gray-900 font-medium"}," 全部標記為已讀 ")):m("",!0)]),e("div",Xe,[g.value?(r(),a("div",Fe,[...t[14]||(t[14]=[e("svg",{class:"animate-spin h-5 w-5 mx-auto mb-2",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),B(" 載入中... ",-1)])])):i.value.notifications.length===0?(r(),a("div",qe,[...t[15]||(t[15]=[e("p",{class:"text-sm"},"目前沒有通知",-1)])])):(r(),a("div",Je,[(r(!0),a($,null,z(i.value.notifications,n=>(r(),a("a",{key:n.id,onClick:o=>j(n),href:"#"+n.link,class:"block px-4 py-3 hover:bg-gray-50 transition-colors"},[e("div",Qe,[e("div",Ye,[e("div",{class:L([n.type==="order"?"bg-blue-100 text-blue-600":n.type==="product"?"bg-green-100 text-green-600":"bg-yellow-100 text-yellow-600","rounded-full p-2"])},[n.type==="order"?(r(),a("svg",et,[...t[16]||(t[16]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"},null,-1)])])):n.type==="product"?(r(),a("svg",tt,[...t[17]||(t[17]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"},null,-1)])])):(r(),a("svg",st,[...t[18]||(t[18]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"},null,-1)])]))],2)]),e("div",ot,[e("p",nt,x(n.title),1),e("p",rt,x(n.message),1),e("p",lt,x(n.time),1)]),n.unread?(r(),a("div",at,[...t[19]||(t[19]=[e("span",{class:"inline-block h-2 w-2 rounded-full bg-blue-600"},null,-1)])])):m("",!0)])],8,Ge))),128))]))]),i.value.notifications.length>0?(r(),a("div",it,[R(c,{to:"/messages/logs",onClick:y,class:"block text-center text-sm font-medium text-gray-700 hover:text-gray-900"},{default:I(()=>[...t[20]||(t[20]=[B(" 查看所有通知 ",-1)])]),_:1})])):m("",!0)])):m("",!0)],512)])]),e("div",dt,[w.hasSidebar?(r(),a("aside",ut,[e("nav",ct,[Z(d.$slots,"sidebar")])])):m("",!0),e("main",pt,[e("div",vt,[Z(d.$slots,"default")])])]),v.value?(r(),a("div",{key:0,class:"fixed inset-0 z-[10000] md:hidden",onClick:t[2]||(t[2]=n=>v.value=!1)},[...t[21]||(t[21]=[e("div",{class:"fixed inset-0 bg-gray-600 bg-opacity-75 transition-opacity"},null,-1)])])):m("",!0),v.value?(r(),a("div",{key:1,class:"fixed inset-y-0 left-0 z-[10001] w-64 bg-white shadow-xl transform transition-transform duration-300 ease-in-out md:hidden",style:{top:"96px"},onClick:t[4]||(t[4]=N(()=>{},["stop"]))},[e("div",gt,[e("nav",yt,[(r(!0),a($,null,z(D.value,n=>(r(),E(c,{key:n.name,to:n.path,onClick:t[3]||(t[3]=o=>v.value=!1),custom:""},{default:I(({isActive:o})=>[e("a",{class:L([o||W(_).matched.some(s=>s.path===n.path)?"bg-blue-50 text-blue-600 border-l-4 border-blue-600":"text-gray-700 hover:bg-gray-50 hover:text-gray-900","block px-4 py-3 rounded-md text-base font-medium transition-colors duration-200"])},x(n.meta.title),3)]),_:2},1032,["to"]))),128))])])])):m("",!0),R(Ee,{"is-open":b.value,onClose:t[5]||(t[5]=n=>b.value=!1),onOpen:t[6]||(t[6]=n=>b.value=!0)},null,8,["is-open"])])}}};export{ht as default};
