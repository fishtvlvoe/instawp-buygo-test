import{r as c,d as y,c as r,a as t,g as x,k as w,t as i,G as p,F as b,l as f,u as _,o as a}from"./main-CKplmvXD.js";const k={class:"space-y-6 pt-2"},C={class:"flex justify-end space-x-3"},M={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},j={class:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4"},V={class:"bg-white overflow-hidden shadow-sm rounded-lg border border-gray-100 p-6 hover:shadow-md transition-shadow"},z={class:"mt-2 text-3xl font-bold text-gray-900 tracking-tight"},B={class:"bg-white overflow-hidden shadow-sm rounded-lg border border-gray-100 p-6 hover:shadow-md transition-shadow"},H={class:"mt-2 text-3xl font-bold text-gray-900 tracking-tight"},N={class:"bg-white overflow-hidden shadow-sm rounded-lg border border-gray-100 p-6 hover:shadow-md transition-shadow"},E={class:"mt-2 text-3xl font-bold text-gray-900 tracking-tight"},F={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},S={class:"bg-white shadow-sm rounded-lg border border-gray-100 p-6"},D={class:"flow-root"},T={key:0,class:"flex justify-center py-8"},A={key:1,class:"text-center py-8 text-sm text-gray-500"},W={key:2,class:"divide-y divide-gray-100 -my-5"},I={class:"flex items-center space-x-4"},L={class:"min-w-0 flex-1"},P={class:"truncate text-sm font-medium text-gray-900"},U={class:"text-xs text-gray-500"},G={class:"inline-flex items-center rounded-full bg-white px-2.5 py-1 text-xs font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 disabled:cursor-not-allowed disabled:opacity-30"},$={__name:"SellerDashboard",setup(R){_();const o=c({orders_today:0,revenue_today:0,pending_shipment:0,recent_activity:[]}),d=c(!0),g=c(null),u=async()=>{d.value=!0,g.value=null;try{const s=window.buygo_frontend||window.buygo_admin;if(!s||!s.api_url)throw new Error("API Configuration missing");const e={"X-WP-Nonce":s.nonce,"Content-Type":"application/json"},n=`${s.api_url}/stats/seller-dashboard`,m=await fetch(n,{headers:e,credentials:"same-origin"});if(!m.ok)throw new Error("無法載入數據");const l=await m.json();if(l.success)o.value=l.data;else throw new Error(l.message||"Unknown error")}catch(s){console.error("Fetch Stats Error:",s),g.value=s.message}finally{d.value=!1}},v=()=>{u()},h=s=>new Intl.NumberFormat("zh-TW",{style:"currency",currency:"TWD",minimumFractionDigits:0}).format(s);return y(()=>{u()}),(s,e)=>(a(),r("div",k,[t("div",C,[t("button",{onClick:v,class:"px-4 py-2 bg-white border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 flex items-center shadow-sm transition-colors"},[d.value?(a(),r("svg",M,[...e[0]||(e[0]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):x("",!0),e[1]||(e[1]=w(" 重新整理 ",-1))]),e[2]||(e[2]=t("button",{class:"px-4 py-2 bg-gray-900 border border-transparent rounded-md text-sm font-medium text-white hover:bg-black shadow-sm transition-colors"}," 產生報表 ",-1))]),t("div",j,[t("div",V,[e[3]||(e[3]=t("dt",{class:"text-sm font-medium text-gray-500 truncate"},"今日訂單",-1)),t("dd",z,i(o.value.orders_today),1)]),t("div",B,[e[4]||(e[4]=t("dt",{class:"text-sm font-medium text-gray-500 truncate"},"今日營收",-1)),t("dd",H,i(h(o.value.revenue_today)),1)]),t("div",N,[e[5]||(e[5]=t("dt",{class:"text-sm font-medium text-gray-500 truncate"},"待處理訂單",-1)),t("dd",E,i(o.value.pending_shipment),1)]),e[6]||(e[6]=t("div",{class:"bg-white overflow-hidden shadow-sm rounded-lg border border-gray-100 p-6 hover:shadow-md transition-shadow"},[t("dt",{class:"text-sm font-medium text-gray-500 truncate"},"上架商品"),t("dd",{class:"mt-2 text-3xl font-bold text-gray-900 tracking-tight"},"-")],-1))]),t("div",F,[e[10]||(e[10]=p('<div class="lg:col-span-2 bg-white shadow-sm rounded-lg border border-gray-100 p-6 min-h-[400px]"><div class="flex items-center justify-between mb-6"><h3 class="text-base font-bold text-gray-900">銷售成長</h3><div class="flex space-x-2"><button class="p-1 rounded hover:bg-gray-100 text-gray-500"><svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path></svg></button><button class="p-1 rounded hover:bg-gray-100 text-gray-500"><svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"></path></svg></button></div></div><div class="flex flex-col items-center justify-center h-64 text-gray-400 bg-gray-50 rounded border border-dashed border-gray-200"><svg class="h-10 w-10 mb-2 opacity-50" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"></path></svg><span class="text-sm">銷售數據圖表將在此顯示</span></div></div>',1)),t("div",S,[e[9]||(e[9]=t("h3",{class:"text-base font-bold text-gray-900 mb-6"},"近期活動",-1)),t("div",D,[d.value?(a(),r("div",T,[...e[7]||(e[7]=[t("svg",{class:"animate-spin h-6 w-6 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)])])):!o.value.recent_activity||o.value.recent_activity.length===0?(a(),r("div",A," 暫無活動紀錄 ")):(a(),r("ul",W,[(a(!0),r(b,null,f(o.value.recent_activity,n=>(a(),r("li",{key:n.id,class:"py-4"},[t("div",I,[e[8]||(e[8]=t("div",{class:"flex-shrink-0"},[t("span",{class:"inline-flex items-center justify-center h-8 w-8 rounded-full bg-blue-50 ring-4 ring-white"},[t("svg",{class:"h-4 w-4 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})])])],-1)),t("div",L,[t("p",P," 訂單 #"+i(n.id)+" 建立成功 ",1),t("p",U,i(n.created_at),1)]),t("div",null,[t("a",G,i(h(n.total_amount)),1)])])]))),128))]))])])])]))}};export{$ as default};
