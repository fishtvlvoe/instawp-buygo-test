import{_ as L,r,d as E,c as i,g as c,a as e,z as M,A as N,k as a,B as I,t as w,h as V,i as k,v as _,o as s}from"./main-CKplmvXD.js";const R={class:"buygo-seller-app"},T={key:0},P={class:"buygo-card",style:{padding:"60px 20px","text-align":"center","max-width":"600px",margin:"0 auto"}},U={style:{width:"80px",height:"80px",background:"#dcfce7",color:"#166534","border-radius":"50%",display:"flex","align-items":"center","justify-content":"center",margin:"0 auto 24px"}},D={style:{width:"40px",height:"40px"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},$={key:1},G={class:"buygo-card",style:{padding:"60px 20px","text-align":"center","max-width":"600px",margin:"0 auto"}},q={style:{width:"80px",height:"80px",background:"#fff7ed",color:"#d97706","border-radius":"50%",display:"flex","align-items":"center","justify-content":"center",margin:"0 auto 24px"}},H={style:{width:"40px",height:"40px"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},O={style:{color:"#6b7280","font-size":"15px","line-height":"1.6","margin-bottom":"16px"}},W={key:2},X={class:"buygo-card",style:{padding:"60px 20px","text-align":"center","max-width":"600px",margin:"0 auto"}},F={style:{width:"80px",height:"80px",background:"#fee2e2",color:"#dc2626","border-radius":"50%",display:"flex","align-items":"center","justify-content":"center",margin:"0 auto 24px"}},J={style:{width:"40px",height:"40px"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},K={key:0,style:{background:"#f9fafb",padding:"16px","border-radius":"8px","text-align":"left",display:"inline-block",width:"100%","box-sizing":"border-box","margin-bottom":"24px"}},Q={style:{color:"#4b5563"}},Y={key:3},Z={class:"buygo-card",style:{padding:"40px","max-width":"600px",margin:"0 auto"}},tt={style:{"text-align":"center",padding:"20px 0"}},et={style:{width:"64px",height:"64px",background:"#fff7ed",color:"#f59e0b","border-radius":"50%",display:"flex","align-items":"center","justify-content":"center",margin:"0 auto 20px"}},ot={style:{width:"32px",height:"32px"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},it={key:4},st={class:"buygo-card",style:{padding:"40px","max-width":"600px",margin:"0 auto"}},nt={style:{"margin-bottom":"24px"}},lt={style:{"margin-bottom":"24px"}},rt={style:{"margin-bottom":"32px"}},at={style:{"border-top":"1px solid #f3f4f6","padding-top":"24px","text-align":"right"}},dt=["disabled"],pt={key:0,class:"animate-spin",style:{width:"20px",height:"20px"},xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},ut={key:1,style:{width:"16px",height:"16px"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},gt={key:0,style:{"text-align":"center",padding:"40px 0"}},xt={style:{width:"64px",height:"64px",background:"#dcfce7",color:"#166534","border-radius":"50%",display:"flex","align-items":"center","justify-content":"center",margin:"0 auto 20px"}},bt={style:{width:"32px",height:"32px"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ct={__name:"SellerApplication",setup(yt){const y=r(!1),f=r(""),m=r(""),z=r(""),h=r(""),g=r(!1),v=r(!1),u=r(!1),j=r(!0),d=r({store_name:"",phone:"",description:""}),C=async()=>{j.value=!0;try{const n=window.buygo_frontend||window.buygo_admin;if(!n||!n.api_url)throw new Error("API Config Missing");const t={"X-WP-Nonce":n.nonce,"Content-Type":"application/json"},p=await fetch(`${n.api_url}/line/bind/status`,{headers:t,credentials:"same-origin"});if(p.ok){const o=await p.json();o.is_bound&&o.line_uid&&(f.value=o.line_uid)}const l=await fetch(`${n.api_url}/applications/me`,{headers:t,credentials:"same-origin"});if(l.ok){const o=await l.json();o.status&&o.status!=="none"&&(m.value=o.status||"",z.value=o.submitted_at||"",h.value=o.review_note||"",o.status==="approved"&&(y.value=!0))}const x=await fetch(`${n.api_url}/members/me`,{headers:t,credentials:"same-origin"});if(x.ok){const o=await x.json();if(o.success&&o.data){const b=o.data.roles||[];(b.includes("buygo_seller")||b.includes("buygo_admin")||b.includes("administrator"))&&(y.value=!0)}}}catch(n){console.error("載入狀態失敗:",n)}finally{j.value=!1}},S=async()=>{var n;u.value=!0;try{const t=window.buygo_frontend||window.buygo_admin;if(!t||!t.api_url)throw new Error("API Config Missing");const p={"X-WP-Nonce":t.nonce,"Content-Type":"application/json"},l={real_name:d.value.store_name,phone:d.value.phone,line_id:f.value,reason:d.value.description||"",product_types:""},x=await fetch(`${t.api_url}/applications`,{method:"POST",headers:p,body:JSON.stringify(l),credentials:"same-origin"}),o=await x.json();if(x.ok&&(o.success||o.code==="success"))v.value=!0,g.value=!1,setTimeout(()=>{B()},2e3);else{const b=o.message||((n=o.error)==null?void 0:n.message)||o.code||"未知錯誤";alert("提交失敗: "+b)}}catch(t){console.error("提交申請失敗:",t),alert("系統錯誤，請傳訊息給客服。")}finally{u.value=!1}},B=()=>{v.value=!1,C()},A=()=>{g.value=!0};return E(()=>{C()}),(n,t)=>{const p=I("router-link");return s(),i("div",R,[y.value?(s(),i("div",T,[t[7]||(t[7]=e("div",{class:"buygo-page-header"},[e("div",{class:"buygo-page-title"},[e("h3",null,"賣家中心"),e("p",null,"您已經是 BuyGo 的賣家合作夥伴。")])],-1)),e("div",P,[e("div",U,[(s(),i("svg",D,[...t[3]||(t[3]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])]))]),t[5]||(t[5]=e("h4",{style:{"font-size":"20px","font-weight":"700",color:"#111827","margin-bottom":"12px"}},"申請成功！",-1)),t[6]||(t[6]=e("p",{style:{color:"#6b7280","font-size":"15px","line-height":"1.6","margin-bottom":"32px"}},"恭喜您成為賣家，您可以開始上架商品並管理訂單。",-1)),M(p,{to:"/sc/dashboard",class:"buygo-btn btn-primary",style:{padding:"12px 32px","font-size":"16px","text-decoration":"none",display:"inline-block"}},{default:N(()=>[...t[4]||(t[4]=[a("前往賣家中心",-1)])]),_:1})])])):m.value==="pending"?(s(),i("div",$,[t[11]||(t[11]=e("div",{class:"buygo-page-header"},[e("div",{class:"buygo-page-title"},[e("h3",null,"申請審核中"),e("p",null,"您的賣家申請正在審核中。")])],-1)),e("div",G,[e("div",q,[(s(),i("svg",H,[...t[8]||(t[8]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])]))]),t[9]||(t[9]=e("h4",{style:{"font-size":"20px","font-weight":"700",color:"#111827","margin-bottom":"12px"}},"申請已送出",-1)),e("p",O,"申請時間："+w(z.value),1),t[10]||(t[10]=e("p",{style:{color:"#6b7280","font-size":"15px","line-height":"1.6"}},[a("管理員將在 1-3 個工作天內完成審核，"),e("br"),a("結果將透過 LINE 通知您。")],-1))])])):m.value==="rejected"&&!g.value?(s(),i("div",W,[t[17]||(t[17]=e("div",{class:"buygo-page-header"},[e("div",{class:"buygo-page-title"},[e("h3",null,"申請未通過"),e("p",null,"您的賣家申請未通過審核。")])],-1)),e("div",X,[e("div",F,[(s(),i("svg",J,[...t[12]||(t[12]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,-1)])]))]),t[15]||(t[15]=e("h4",{style:{"font-size":"20px","font-weight":"700",color:"#111827","margin-bottom":"12px"}},"申請未通過",-1)),t[16]||(t[16]=e("p",{style:{color:"#6b7280","font-size":"15px","line-height":"1.6","margin-bottom":"24px"}},"很抱歉，您的申請資料未符合我們的審核標準。",-1)),h.value?(s(),i("div",K,[t[13]||(t[13]=e("span",{style:{"font-weight":"600",color:"#374151",display:"block","margin-bottom":"4px"}},"審核意見：",-1)),e("span",Q,w(h.value),1)])):c("",!0),e("div",{style:{"margin-top":"24px"}},[t[14]||(t[14]=e("p",{style:{color:"#9ca3af","font-size":"14px","margin-bottom":"16px"}},"您可以修正資料後重新提出申請。",-1)),e("button",{onClick:A,class:"buygo-btn btn-primary",style:{padding:"10px 24px"}},"重新申請")])])])):!f.value&&!g.value?(s(),i("div",Y,[t[22]||(t[22]=e("div",{class:"buygo-page-header"},[e("div",{class:"buygo-page-title"},[e("h3",null,"申請成為賣家"),e("p",null,"加入 BuyGo 賣家行列，建立您的專屬商店。")])],-1)),e("div",Z,[e("div",tt,[e("div",et,[(s(),i("svg",ot,[...t[18]||(t[18]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"},null,-1)])]))]),t[20]||(t[20]=e("h4",{style:{"font-size":"20px","font-weight":"700",color:"#111827","margin-bottom":"12px"}},"請先綁定 LINE 帳號",-1)),t[21]||(t[21]=e("p",{style:{color:"#6b7280","margin-bottom":"32px","line-height":"1.6"}},[a("為了確保您的帳戶安全以及能夠接收即時訂單通知，"),e("br"),a("申請賣家資格前，請務必先完成 LINE 帳號綁定。")],-1)),M(p,{to:"/line-binding",class:"buygo-btn btn-primary",style:{padding:"10px 24px","font-size":"15px","text-decoration":"none",display:"inline-block"}},{default:N(()=>[...t[19]||(t[19]=[a("前往 LINE 綁定頁面",-1)])]),_:1})])])])):g.value||!y.value&&m.value!=="pending"&&f.value?(s(),i("div",it,[t[32]||(t[32]=e("div",{class:"buygo-page-header"},[e("div",{class:"buygo-page-title"},[e("h3",null,"申請成為賣家"),e("p",null,"加入 BuyGo 賣家行列，建立您的專屬商店。")])],-1)),e("div",st,[e("form",{onSubmit:V(S,["prevent"]),style:{"text-align":"left"}},[t[28]||(t[28]=e("div",{style:{"margin-bottom":"32px","text-align":"center"}},[e("h4",{style:{"font-size":"20px","font-weight":"700",color:"#111827","margin-bottom":"8px"}},"填寫賣家申請資料")],-1)),e("div",nt,[t[23]||(t[23]=e("label",{style:{display:"block","font-size":"14px","font-weight":"600",color:"#374151","margin-bottom":"8px"}},[a("商店名稱 (賣家暱稱) "),e("span",{style:{color:"#ef4444"}},"*")],-1)),k(e("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>d.value.store_name=l),type:"text",required:"",style:{width:"100%",padding:"10px 12px",border:"1px solid #d1d5db","border-radius":"6px","font-size":"15px",color:"#111827",background:"#fff","box-shadow":"0 1px 2px rgba(0,0,0,0.05)",transition:"border-color 0.15s","box-sizing":"border-box"},placeholder:"請輸入您的商店名稱"},null,512),[[_,d.value.store_name]])]),e("div",lt,[t[24]||(t[24]=e("label",{style:{display:"block","font-size":"14px","font-weight":"600",color:"#374151","margin-bottom":"8px"}},[a("聯絡電話 "),e("span",{style:{color:"#ef4444"}},"*")],-1)),k(e("input",{"onUpdate:modelValue":t[1]||(t[1]=l=>d.value.phone=l),type:"tel",required:"",style:{width:"100%",padding:"10px 12px",border:"1px solid #d1d5db","border-radius":"6px","font-size":"15px",color:"#111827",background:"#fff","box-shadow":"0 1px 2px rgba(0,0,0,0.05)",transition:"border-color 0.15s","box-sizing":"border-box"},placeholder:"請輸入可聯繫的手機號碼"},null,512),[[_,d.value.phone]])]),e("div",rt,[t[25]||(t[25]=e("label",{style:{display:"block","font-size":"14px","font-weight":"600",color:"#374151","margin-bottom":"8px"}},"申請說明",-1)),k(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=l=>d.value.description=l),style:{width:"100%",height:"120px",padding:"10px 12px",border:"1px solid #d1d5db","border-radius":"6px","font-size":"15px",color:"#111827",background:"#fff","box-shadow":"0 1px 2px rgba(0,0,0,0.05)",transition:"border-color 0.15s",resize:"vertical","box-sizing":"border-box"},placeholder:"簡單描述您預計販售的商品類型或是經營計畫..."},null,512),[[_,d.value.description]])]),e("div",at,[e("button",{type:"submit",disabled:u.value,class:"buygo-btn btn-primary",style:{width:"100%",padding:"12px","font-size":"15px","font-weight":"600",display:"flex","align-items":"center","justify-content":"center",gap:"8px"}},[u.value?(s(),i("svg",pt,[...t[26]||(t[26]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):c("",!0),e("span",null,w(u.value?"提交中...":"提交賣家申請"),1),u.value?c("",!0):(s(),i("svg",ut,[...t[27]||(t[27]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14 5l7 7m0 0l-7 7m7-7H3"},null,-1)])]))],8,dt)])],32),v.value?(s(),i("div",gt,[e("div",xt,[(s(),i("svg",bt,[...t[29]||(t[29]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])]))]),t[30]||(t[30]=e("h4",{style:{"font-size":"20px","font-weight":"700",color:"#111827","margin-bottom":"12px"}},"申請已送出！",-1)),t[31]||(t[31]=e("p",{style:{color:"#6b7280","font-size":"15px","line-height":"1.6"}},[a("我們已收到您的賣家申請。"),e("br"),a("管理員將在 1-3 個工作天內完成審核，結果將透過 LINE 通知您。")],-1)),e("div",{style:{"margin-top":"32px"}},[e("button",{onClick:B,class:"buygo-btn btn-outline",style:{padding:"10px 24px"}},"查看狀態")])])):c("",!0)])])):c("",!0)])}}},mt=L(ct,[["__scopeId","data-v-1fc009b9"]]);export{mt as default};
